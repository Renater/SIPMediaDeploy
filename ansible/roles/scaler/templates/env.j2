# Application version
VERSION={{ scaler_version }}

# Webserver configuration
APP_HOST={{ scaler_http_host }}
APP_PORT={{ scaler_http_port }}

# Replica capacity configuration
REPLICA_CAPACITY={{ scaler_replica_capacity }}
REPLICA_MIN_AVAILABLE_RESOURCES={{ scaler_replica_min_available_resources }}

# Replica API configuration
REPLICA_API_PROTOCOL={{ scaler_replica_api_protocol }}
REPLICA_API_PORT={{ scaler_replica_api_port }}
REPLICA_API_PATH={{ scaler_replica_api_path }}
REPLICA_API_CAPACITY_KEY={{ scaler_replica_api_capacity_key }}
REPLICA_API_TERMINATION_KEY={{ scaler_replica_api_termination_key }}

# External address management
# This option allows the scaler to manage external addresses
EXTERNAL_ADDRESS_MANAGEMENT={{ scaler_external_address_management | lower }}

# Autoscaling
# This option allows the scaler to autoscale itself
ENABLE_AUTOSCALING={{ scaler_autoscaling | lower }}
AUTOSCALING_MIN_REPLICA={{ scaler_provider_autoscaling_configuration.nodes }}

# Cloud provider
# The only available value is `openstack`
PROVIDER={{ scaler_provider }}


### PROVIDERS CONFIGURATIONS ###

{% if scaler_provider == 'openstack' %}
# Openstack provider configuration
OS_AUTH_URL={{ scaler_provider_configuration.auth_url }}
OS_USERNAME={{ scaler_provider_configuration.username }}
OS_PASSWORD={{ scaler_provider_configuration.password }}
OS_REGION_NAME={{ scaler_provider_configuration.region_name }}
OS_PROJECT_DOMAIN_ID={{ scaler_provider_configuration.project_domain_id }}
OS_USER_DOMAIN_NAME={{ scaler_provider_configuration.user_domain_name }}
OS_PROJECT_ID={{ scaler_provider_configuration.project_id }}
OS_PROJECT_NAME={{ scaler_provider_configuration.project_name }}
OS_INTERFACE={{ scaler_provider_configuration.interface }}
OS_IDENTITY_API_VERSION={{ scaler_provider_configuration.identity_api_version }}
OPENSTACK_SCALED_NAME={{ scaler_provider_configuration.server_name }}
OPENSTACK_SCALED_FLAVOR={{ scaler_provider_configuration.flavor }}
OPENSTACK_SCALED_IMAGE={{ scaler_provider_configuration.image }}
OPENSTACK_IP_VERSION={{ scaler_provider_configuration.ip_version }}
OPENSTACK_SCALED_NETWORK={{ scaler_provider_configuration.network }}
OPENSTACK_METADATA_KEY={{ scaler_provider_configuration.metadata_key }}
OPENSTACK_METADATA_SCALED_VALUE={{ scaler_provider_configuration.metadata_value }}
OPENSTACK_FLOATING_IP_DESCRIPTION={{ scaler_provider_configuration.floating_ip_description }}
OPENSTACK_KEYPAIR={{ scaler_provider_configuration.keypair }}
OPENSTACK_SCALED_CLOUD_INIT_FILE={% if scaler_provider_configuration.use_cloud_init %}{{ scaler_provider_configuration.cloud_init_file }}{% endif +%}
{% endif %}

# Auto-scaling configuration
OPENSTACK_AUTOSCALER_NAME={{ scaler_provider_autoscaling_configuration.server_name }}
OPENSTACK_AUTOSCALER_FLAVOR={{ scaler_provider_autoscaling_configuration.flavor }}
OPENSTACK_AUTOSCALER_IMAGE={{ scaler_provider_autoscaling_configuration.image }}
OPENSTACK_AUTOSCALER_NETWORK={{ scaler_provider_autoscaling_configuration.network }}
OPENSTACK_METADATA_AUTOSCALER_VALUE={{ scaler_provider_autoscaling_configuration.metadata_value }}
OPENSTACK_AUTOSCALER_CLOUD_INIT_FILE={% if scaler_provider_autoscaling_configuration.use_cloud_init %}{{ scaler_provider_autoscaling_configuration.cloud_init_file }}{% endif +%}
